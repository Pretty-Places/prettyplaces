<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta
			name="description"
			content="Contact Community Maintenance Co. for professional maintenance services"
		/>
		<title>Contact Us | Community Maintenance Co.</title>
		<link rel="stylesheet" href="styles.css" />
	</head>
	<body>
		<header>
			<nav class="navbar">
				<div class="container">
					<div class="logo">
						<h1>Community Maintenance Co.</h1>
					</div>
					<ul class="nav-menu">
						<li><a href="index.html">Home</a></li>
						<li><a href="contact.html" class="active">Contact</a></li>
					</ul>
				</div>
			</nav>
		</header>

		<main>
			<section class="contact-section">
				<div class="container">
					<h2 class="section-title">Get In Touch</h2>
					<div class="contact-wrapper">
						<!-- Contact Information -->
						<div class="contact-info">
							<h3>Contact Information</h3>
							<div class="info-item">
								<strong>Phone:</strong>
								<p>(555) 123-4567</p>
							</div>
							<div class="info-item">
								<strong>Email:</strong>
								<p>info@communitymaintenance.com</p>
							</div>
							<div class="info-item">
								<strong>Business Hours:</strong>
								<p>
									Monday - Friday: 7:00 AM - 6:00 PM<br />
									Saturday: 8:00 AM - 4:00 PM<br />
									Sunday: Closed
								</p>
							</div>
							<div class="info-item">
								<strong>Address:</strong>
								<p>
									123 Maintenance Way<br />
									Your City, ST 12345
								</p>
							</div>
							<div class="info-item">
								<strong>Emergency Service:</strong>
								<p>Available 24/7 for urgent maintenance needs</p>
							</div>
						</div>

						<!-- Contact Form -->
						<div class="contact-form-wrapper">
							<h3>Send Us a Message</h3>
							<form id="contactForm" class="contact-form">
								<div class="form-group">
									<label for="name">Full Name *</label>
									<input type="text" id="name" name="name" required />
								</div>

								<div class="form-group">
									<label for="email">Email Address *</label>
									<input type="email" id="email" name="email" required />
								</div>

								<div class="form-group">
									<label for="phone">Phone Number</label>
									<input type="tel" id="phone" name="phone" />
								</div>

								<div class="form-group">
									<label for="community">Community/Property Name</label>
									<input type="text" id="community" name="community" />
								</div>

								<div class="form-group">
									<label for="subject">Subject *</label>
									<input type="text" id="subject" name="subject" required />
								</div>

								<div class="form-group">
									<label for="message">Message *</label>
									<textarea id="message" name="message" rows="6" required></textarea>
								</div>

								<div class="form-group">
									<button type="submit" class="btn btn-primary">Send Message</button>
								</div>

								<div id="formMessage" class="form-message"></div>
							</form>
						</div>
					</div>
				</div>
			</section>
		</main>

		<footer>
			<div class="container">
				<p>&copy; 2024 Community Maintenance Co. All rights reserved.</p>
			</div>
		</footer>

		<script>
			document.getElementById("contactForm").addEventListener("submit", async function (e) {
				e.preventDefault();

				const form = e.target;
				const formData = new FormData(form);
				const data = Object.fromEntries(formData);

				const submitButton = form.querySelector('button[type="submit"]');
				const messageDiv = document.getElementById("formMessage");

				// Disable submit button
				submitButton.disabled = true;
				submitButton.textContent = "Sending...";
				messageDiv.textContent = "";
				messageDiv.className = "form-message";

				try {
					const response = await fetch("/api/contact", {
						method: "POST",
						headers: {
							"Content-Type": "application/json",
						},
						body: JSON.stringify(data),
					});

					const result = await response.json();

					if (response.ok) {
						messageDiv.textContent =
							"Thank you! Your message has been sent successfully. We will get back to you soon.";
						messageDiv.className = "form-message success";
						form.reset();
					} else {
						throw new Error(result.error || "Failed to send message");
					}
				} catch (error) {
					messageDiv.textContent =
						"Sorry, there was an error sending your message. Please try again or contact us directly.";
					messageDiv.className = "form-message error";
					console.error("Error:", error);
				} finally {
					submitButton.disabled = false;
					submitButton.textContent = "Send Message";
				}
			});
		</script>
	</body>
</html>
